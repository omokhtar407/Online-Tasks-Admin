"use strict";(self.webpackChunkwork_space=self.webpackChunkwork_space||[]).push([[655],{2655:(R,m,o)=>{o.r(m),o.d(m,{ManageUsersModule:()=>F});var d=o(8583),_=o(4655);var t=o(7716),h=o(1433),U=o(6509),g=o(8295),Z=o(9983),c=o(2789),u=o(2533),T=o(1095);function x(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," No."),t.qZA())}function v(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=n.index;t.xp6(1),t.hij(" ",s+1," ")}}function C(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," username "),t.qZA())}function A(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.xp6(1),t.hij(" ",s.username," ")}}function b(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," Email "),t.qZA())}function y(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.xp6(1),t.hij(" ",s.email," ")}}function w(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," AssignedTasks "),t.qZA())}function N(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.xp6(1),t.hij(" ",s.assignedTasks," ")}}function k(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," Actions "),t.qZA())}function q(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(s);const i=t.oxw(),r=i.$implicit,l=i.index;return t.oxw(2).changeStatus(r._id,r.status,l)}),t._uU(1,"In-Active"),t.qZA()}}function Y(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(s);const i=t.oxw(),r=i.$implicit,l=i.index;return t.oxw(2).changeStatus(r._id,r.status,l)}),t._uU(1,"Active"),t.qZA()}}function D(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"td",27),t.YNc(1,q,2,0,"button",28),t.YNc(2,Y,2,0,"button",29),t.TgZ(3,"button",30),t.NdJ("click",function(){const i=t.CHM(s),r=i.$implicit,l=i.index;return t.oxw(2).deleteUser(r._id,l)}),t._uU(4,"Delete"),t.qZA(),t.qZA()}if(2&e){const s=n.$implicit;t.xp6(1),t.Q6J("ngIf","Active"==s.status),t.xp6(1),t.Q6J("ngIf","Active"!==s.status)}}function M(e,n){1&e&&t._UZ(0,"tr",33)}function S(e,n){1&e&&t._UZ(0,"tr",34)}const P=function(e,n){return{id:"users",itemsPerPage:5,currentPage:e,totalItems:n}};function J(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"table",14),t.ynx(2,15),t.YNc(3,x,2,0,"th",16),t.YNc(4,v,2,1,"td",17),t.BQk(),t.ynx(5,18),t.YNc(6,C,2,0,"th",16),t.YNc(7,A,2,1,"td",17),t.BQk(),t.ynx(8,19),t.YNc(9,b,2,0,"th",16),t.YNc(10,y,2,1,"td",17),t.BQk(),t.ynx(11,20),t.YNc(12,w,2,0,"th",16),t.YNc(13,N,2,1,"td",17),t.BQk(),t.ynx(14,21),t.YNc(15,k,2,0,"th",16),t.YNc(16,D,5,2,"td",17),t.BQk(),t.YNc(17,M,1,0,"tr",22),t.YNc(18,S,1,0,"tr",23),t.ALo(19,"paginate"),t.qZA(),t.TgZ(20,"div",24),t.TgZ(21,"pagination-controls",25),t.NdJ("pageChange",function(i){return t.CHM(s),t.oxw().handlePageChange(i)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const s=t.oxw();t.xp6(1),t.Q6J("dataSource",s.users),t.xp6(16),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.xi3(19,3,s.displayedColumns,t.WLB(6,P,s.currPage,s.totalPages)))}}function I(e,n){1&e&&(t.TgZ(0,"div",35),t.TgZ(1,"p",36),t._uU(2,"No Users Available"),t.qZA(),t.qZA())}const B=[{path:"",component:(()=>{class e{constructor(s,a){this.userSer=s,this.toastr=a,this.users=[],this.displayedColumns=["position","username","email","assignedTasks","actions"],this.imgPrefix="https://crud-jo8k.onrender.com/",this.currPage=1,this.totalPages=0,this.filtration={page:this.currPage,limit:5},this.getUsersDataFromBeh()}searchUser(s){this.filtration.name=s.value.toLowerCase(),this.currPage=1,this.filtration.page=this.currPage,clearTimeout(this.timeOutId),this.timeOutId=setTimeout(()=>{this.getAllUsers()},2e3)}getAllUsers(){this.userSer.getUsersData(this.filtration)}getUsersDataFromBeh(){this.userSer.usersData.subscribe(s=>{this.users=s.data,this.totalPages=s.total})}deleteUser(s,a){this.users[a].assignedTasks>0?this.toastr.error("You can't delete user until he finish his tasks"):this.userSer.deleteUser(s).subscribe(i=>{this.toastr.success("User Deleted Successfully"),this.getAllUsers()})}changeStatus(s,a,i){const r={id:s,status:a};this.users[i].assignedTasks>0?this.toastr.error("You can't change user status until he finish his tasks"):this.userSer.changeStatus(r).subscribe(l=>{console.log(l),this.toastr.success("User Status Changed Successfully"),this.getAllUsers()})}handlePageChange(s){this.currPage=s,this.filtration.page=this.currPage,this.getAllUsers()}ngOnInit(){this.getAllUsers()}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(h.f),t.Y36(U._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users"]],decls:18,vars:2,consts:[[1,"pad-top"],[1,"container"],[1,"row","g-4"],[1,"col-12"],[1,"mb-1","fw-bolder"],[1,"brdr"],[1,"d-flex"],[1,"row","justify-content-between","align-items-center","g-3","w-100"],[1,"col-lg-3","col-md-4"],["appearance","fill",1,"example-full-width","w-100"],["type","text","matInput","","placeholder","Ex. Omar",3,"keyup"],["class","mat-elevation-z8 overflow-auto mb-5 rounded-1",4,"ngIf"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],[1,"mat-elevation-z8","overflow-auto","mb-5","rounded-1"],["mat-table","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","assignedTasks"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"pagination-container"],["id","users",3,"pageChange"],["mat-header-cell",""],["mat-cell",""],["class","m-2","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","btn btn-success m-2",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",1,"m-2",3,"click"],["mat-raised-button","","color","primary",1,"m-2",3,"click"],[1,"btn","btn-success","m-2",3,"click"],["mat-header-row",""],["mat-row",""],[1,"d-flex","justify-content-center","align-items-center"],[1,"fs-3","fw-bold","text-danger"]],template:function(s,a){1&s&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h1",4),t._uU(5,"All Users"),t.qZA(),t._UZ(6,"div",5),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"form",6),t.TgZ(9,"div",7),t.TgZ(10,"div",8),t.TgZ(11,"mat-form-field",9),t.TgZ(12,"mat-label"),t._uU(13,"Search.."),t.qZA(),t.TgZ(14,"input",10),t.NdJ("keyup",function(r){return a.searchUser(r.target)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",3),t.YNc(16,J,22,9,"div",11),t.YNc(17,I,3,0,"div",12),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(16),t.Q6J("ngIf",0!=a.users.length),t.xp6(1),t.Q6J("ngIf",0==a.users.length))},directives:[g.KE,g.hX,Z.Nt,d.O5,c.BZ,c.w1,c.fO,c.Dz,c.as,c.nj,u.LS,c.ge,c.ev,T.lW,c.XQ,c.Gk],pipes:[u._s],styles:[""]}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[_.Bz.forChild(B)],_.Bz]}),e})();var j=o(2207);let F=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,u.JX,Q,j.q]]}),e})()}}]);